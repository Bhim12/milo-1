<html lang="en">

<head>
  <title>CaaS Updater</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- <script type="module" src="./caas-convert.js"></script> -->
</head>

<body>
  <div class="bulk-publisher">
    <div class="main">
      <div class="options-panel">
        <dt class="title is-expanded">
          <span>CaaS Updater</span>
        </dt>
        <dd class="countries">
          <div class="countries-label">
            <label for="countries">Countries (comma sep):</label>
          </div>
          <textarea id="countries" name="countries" rows="10" cols="50"></textarea>
          <button id="getfiles" href="#">Get Files</button>
          <button id="updatefiles" href="#">Update Files</button>
          <button id="backupfiles" href="#">Backup Files</button>
          <button id="findmissing" href="#">Find Missing Backup Files</button>
          <button id="fixcs" href="#">Fix customer story file</button>
        </dd>
      </div>
    </div>
    <!-- <dd class="results">
      <div>
        <label for="errors">Errors:</label>
        <textarea id="errors" name="errors" rows="10" cols="50"></textarea>
      </div>
      <div>
        <label for="success">Success:</label>
        <textarea id="success" name="success" rows="10" cols="50"></textarea>
      </div>
    </dd> -->
  </div>
  <script type="module">
    import { backupFiles, fetchCaasFiles, findMissingBackups, fixCsAdobeTarget, updateCaasFiles } from './caas-convert.js';

    document.getElementById('getfiles').addEventListener('click', async () => {
      const countries = document.getElementById('countries').value;
      await fetchCaasFiles(countries);
    });

    document.getElementById('updatefiles').addEventListener('click', async () => {
      const countries = document.getElementById('countries').value;
      await updateCaasFiles(countries);
    });

    document.getElementById('backupfiles').addEventListener('click', async () => {
      const countries = document.getElementById('countries').value;
      await backupFiles(countries);
    });

    document.getElementById('findmissing').addEventListener('click', async () => {
      const countries = document.getElementById('countries').value;
      await findMissingBackups(countries);
    });

    document.getElementById('fixcs').addEventListener('click', async () => {
      const countries = document.getElementById('countries').value;
      await fixCsAdobeTarget(countries);
    });

  </script>
</body>
